<!DOCTYPE html>
<html lang="fr"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
    <h:head>
    	<title>home</title>
    </h:head>
    <h:body>
    	<h:form> 

				    	 
				        <p:tabView>
					       
					         <p:tab title="Historique pointage">
		        	<p:dataTable id="tbl" var="enter" value="#{chefDepartement.entrants}"  widgetVar="carsTable"
                 emptyMessage="No records found ." filteredValue="#{chefDepartement.filteredEntrants}"
                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                 paginator="true" rows="10" style="margin-bottom:20px">
      
				      <f:facet name="header">
				            <p:outputPanel>
				                <h:outputText value="Search all fields:" />
				                <p:inputText id="globalFilter" onkeyup="PF('carsTable').filter()" style="width:150px" placeholder="Enter keyword"/>
				            </p:outputPanel>
				      </f:facet>
				      
				      
			       <p:column headerText="matricule" sortBy="#{enter.matricule}" filterBy="#{enter.matricule}">
				            <h:outputText value="#{enter.matricule}" />
				        </p:column>
				 
				 		<p:column sortBy="#{enter.nom}" filterBy="#{enter.nom}"  filterMatchMode="contains">
				            <f:facet name="header">
				                <h:outputText value="nom" />
				            </f:facet>
				            <h:outputText value="#{enter.nom}" />
				        </p:column>
				        
				        <p:column sortBy="#{enter.prenom}" filterBy="#{enter.prenom}"  filterMatchMode="contains">
				            <f:facet name="header">
				                <h:outputText value="prenom" />
				            </f:facet>
				            <h:outputText value="#{enter.prenom}" />
				        </p:column>
				        <p:column sortBy="#{enter.date}"  filterBy="#{enter.date}"  filterMatchMode="contains">
				            <f:facet name="filter">
				                <p:spinner onchange="PF('carsTable').filter()" styleClass="year-spinner">
				                    <f:converter converterId="javax.faces.Integer" />
				                </p:spinner>
				            </f:facet>
				            <f:facet name="header">
				                <h:outputText value="Jour" />
				           </f:facet> 
				            <h:outputText value="#{enter.date}" />
				        </p:column>
				 
				        <p:column sortBy="#{enter.time}" filterBy="#{enter.time}"  filterMatchMode="contains">
				            <f:facet name="header">
				                <h:outputText value="l'heure de pointage" />
				            </f:facet>
				            <h:outputText value="#{enter.time}" />
				        </p:column>
				    </p:dataTable>    
				    <h:panelGrid>
           <p:panel header="Export All Data">
            <h:commandLink>
                <h:graphicImage value="/Images/pdf.jpg"  width="48"/> 
                <p:dataExporter type="pdf" target="tbl" fileName="Data" />
            </h:commandLink>
            
              <h:commandLink>
                <h:graphicImage value="/Images/xls.jpg"  width="48"/> 
               <p:dataExporter type="xls" target="tbl" fileName="Data" />
            </h:commandLink> 
  
           <h:commandLink>
                <h:graphicImage value="/Images/csv.jpg"  width="48"/> 
                <p:dataExporter type="csv" target="tbl" fileName="Data" pageOnly="true" />
         </h:commandLink>
 
       <!--  <h:commandLink>
               <p:graphicImage name="images/ok.png" />
              <p:dataExporter type="xml" target="tbl" fileName="cars" pageOnly="true" />
        </h:commandLink>
        -->  
           </p:panel>
          </h:panelGrid> 
		        </p:tab>
			                 <p:tab title="Taux d'absence">
					        	
					        	<p:panel id="panel" header="Taux d'absence" style="width:70%;margin:auto">
					        	<h:panelGrid columns="2" cellpadding="5" style="margin:auto">
					        		<p:outputLabel for="departement" service="Service: " />
        							<p:selectOneMenu id="departement" value="#{chefDepartement.nomDepartement}">
            							<f:selectItem itemLabel="Selectionner..." itemValue="" />
            							<f:selectItems value="#{chefDepartement.departements}" />
        							</p:selectOneMenu>
					        	</h:panelGrid>
					            <h:panelGrid columns="4" cellpadding="5" style="margin:auto">
					                <h:outputLabel for="debut" value="De : " />
				        			<p:calendar mindate="1/1/00" maxdate="2/27/17" id="debut"  value="#{chefDepartement.debut}"  label="date" />
				        			
				        			<h:outputLabel for="fin" value="Ã  : " />
				        			<p:calendar mindate="1/1/00"  maxdate="2/28/17" id="fin" value="#{chefDepartement.fin}" label="date" />
					            </h:panelGrid>
								
								<h:commandButton value="Afficher" action="#{chefDepartement.defineChart2}" update="hh" />
					            
					        </p:panel>
					        	<p:chart id="hh" type="line" model="#{chefDepartement.abs1}" style="height:300px;"/>
					        </p:tab>
					    </p:tabView>
			</h:form>
	</h:body>
</html>